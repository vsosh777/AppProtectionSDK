# AppProtectionSDK

## Обзор

AppProtectionSDK — это библиотека для защиты Android-приложений от различных угроз безопасности. SDK предоставляет комплексный набор инструментов для обнаружения и предотвращения несанкционированного доступа к приложению, включая:

- Обнаружение попыток взлома памяти
- Определение root-доступа на устройстве
- Обнаружение режима отладки
- Защиту критических регионов памяти

## Особенности

- **Мониторинг памяти**: Защита критических регионов памяти и обнаружение попыток модификации
- **Обнаружение root-доступа**: Определение наличия root-прав на устройстве
- **Обнаружение отладки**: Выявление процессов отладки приложения
- **Настраиваемый уровень защиты**: Гибкая настройка уровня защиты (LOW, MEDIUM, HIGH)
- **Нативный код**: Использование C/C++ кода через JNI для реализации низкоуровневых функций защиты
- **Легкая интеграция**: Простая интеграция в существующие приложения

## Требования

- Android API уровня 21 или выше
- Gradle 7.0+
- Kotlin 1.8+

## Установка

Добавьте репозиторий и зависимость в файл build.gradle уровня приложения:

```kotlin
dependencies {
    implementation(project(":sdk"))
}
```

## Использование

### Инициализация SDK

```kotlin
// Создание конфигурации безопасности
val config = SecurityConfig(
    memoryScanInterval = 1000L, // Интервал сканирования памяти в мс
    criticalMemoryRegions = listOf("sensitive_data_region"),
    enableRootDetection = true,
    enableDebugDetection = true,
    enableMemoryMonitoring = true,
    protectionLevel = ProtectionLevel.HIGH
)

// Получение экземпляра SDK и инициализация
val sdk = AppProtectionSDK.getInstance(context, config)
sdk.initialize()
```

### Обработка событий взлома

```kotlin
// Добавление слушателя для обработки событий взлома
sdk.addTamperingListener(object : AppProtectionSDK.TamperingListener {
    override fun onTamperingDetected(region: String, details: String) {
        // Обработка события взлома
        Log.e("AppSecurity", "Обнаружен взлом региона: $region")
        // Дополнительные действия: очистка данных, выход из приложения и т.д.
    }
})
```

### Проверка статуса защиты

```kotlin
// Проверка, активна ли защита
val isProtected = sdk.isProtected()

// Получение подробного статуса защиты
val protectionStatus = sdk.getProtectionStatus()

// Проверка, рутировано ли устройство
val isRooted = sdk.isDeviceRooted()

// Проверка наличия отладчика
val isBeingDebugged = sdk.isBeingDebugged()
```

### Остановка защиты

```kotlin
// Остановка всех механизмов защиты (например, при закрытии приложения)
sdk.stopProtection()
```

## Документация

Подробное руководство по интеграции SDK доступно в [документации](docs/INTEGRATION.md).

## Тестовое приложение

В репозитории доступно демонстрационное приложение (`/app`), которое показывает основные возможности SDK:

- Тестирование обнаружения root-доступа
- Проверка работы мониторинга памяти
- Демонстрация различных уровней защиты
- Тестирование обнаружения отладчика
- Визуализация статуса защиты

### Запуск тестового приложения

1. Откройте проект в Android Studio
2. Выберите модуль `app` в качестве активного
3. Нажмите "Run" (зеленый треугольник) или используйте сочетание клавиш Shift+F10

### Тестовые сценарии

1. **Проверка root-доступа**
   - Запустите приложение на устройстве с root-правами
   - Наблюдайте за реакцией SDK

2. **Тестирование мониторинга памяти**
   - Используйте MemoryTestActivity для проверки защиты памяти
   - Попробуйте модифицировать защищенные регионы

3. **Проверка обнаружения отладчика**
   - Подключите отладчик к приложению
   - Наблюдайте за реакцией системы защиты

4. **Тестирование уровней защиты**
   - Измените уровень защиты в настройках
   - Проверьте различные сценарии нарушения безопасности

## Структура проекта

- `/app` - Демонстрационное приложение, показывающее использование SDK
- `/sdk` - Исходный код библиотеки AppProtectionSDK
  - `/sdk/src/main/java` - Код на Kotlin
  - `/sdk/src/main/cpp` - Нативный код на C/C++
  - `/sdk/openssl` - Интеграция OpenSSL для криптографических операций

## Безопасность и ограничения

AppProtectionSDK значительно повышает безопасность приложения, но важно понимать, что ни одно решение не обеспечивает 100% защиты от всех типов атак. SDK наиболее эффективен как часть комплексной стратегии безопасности.
